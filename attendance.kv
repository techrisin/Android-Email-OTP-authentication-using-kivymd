#:import ScreenManager kivy.uix.screenmanager 
#:import MDScreen kivymd.uix.screen 

ScreenManager:
    id: screen_manager
	MainScreen:
	LoggedinScreen:

<MainScreen>:
    name: "prelogin"
    # md_bg_color: self.theme_cls.backgroundColor
    md_bg_color: 0.0196,0.4275,0.3961,1
    MDFloatLayout:
        # MDIconButton:
        #     id : resendotpbutton
        #     icon: "chevron-left"
        #     # style: "tonal"
        #     padding: 15
        #     # radius: [self.height / 2, ]
        #     # halign : "center"
        #     theme_font_size: "Custom"
        #     font_size: "55sp"
        #     pos_hint: {"center_x" : -0.1, "center_y": .95}
        #     theme_text_color: "Custom"
        #     text_color: 1, 1, 1, 1
        #     ripple_scale: 0
        #     # color: 120/255, 120/255, 120/255, 1
        #     on_press : app.resettoemail()

        FitImage:
            source: "assets/images/vinayagar.png"
            size_hint : [0.4, 0.35]
            pos_hint: {"center_x": .5, "center_y": .8}
            radius: self.width / 2
        
        
        # FitImage:
        #     source: "assets/images/techris.png"
        #     size_hint: None,None #"0.2"
        #     width : root.width * 0.7
        #     fit_mode : "contain"
        #     pos_hint: {"center_x": .5, "center_y": .55}

        MDTextField:
            mode: "filled"
            id : otpemail
            size_hint_x : 0.8
            pos_hint: {"center_x": .5, "center_y": .4}
            validator: "email" 

            MDTextFieldLeadingIcon:
                icon: "email"

            MDTextFieldHintText:
                text: "Enter email to get OTP"
            # MDTextFieldHelperText:
            #     text: "VV"
            #     mode: "persistent"
        MDTextField:
            mode: "filled"
            id : otpreceived
            size_hint_x : 0.8
            pos_hint: {"center_x": .5, "center_y": -.25}
            input_filter: 'int'
            MDTextFieldLeadingIcon:
                icon: "key-outline"

            MDTextFieldHintText:
                text: "Enter the OTP received"
            # MDTextFieldHelperText:
            #     text: "VV"
            #     mode: "persistent"
        MDLabel:
            text : ""
            # text : "Enter valid email"
            id : v2
            pos_hint: {"x": .15, "center_y": .32}
            bold: True
            text_color : "red" #self.theme_cls.primaryColor
            # theme_font_size: "Custom"
            # font_size: "30dp"
            # md_bg_color: self.theme_cls.backgroundColor

            # MDTextFieldTrailingIcon:
            #     icon: "information"

            # MDTextFieldMaxLengthText:
            #     max_text_length: 10
            
        MDButton:
            id : otpbutton
            style: "elevated"
            pos_hint: {"center_x": .5, "center_y": 0.25}
            # theme_bg_color: "Custom"
            # md_bg_color: "brown"
            ripple_scale: 0
            on_press : app.getotp()
            
            MDButtonText:
                text: "Get OTP"
        MDButton:
            id : validatebutton
            style: "elevated"
            pos_hint: {"center_x": .5, "center_y": -0.28}
            # theme_bg_color: "Custom"
            # md_bg_color: "brown"
            on_press : app.validateotp()
            
            MDButtonText:
                text: "Validate"
        
        MDButton:
            id : resendotpbutton
            style: "elevated"
            pos_hint: {"center_x": .7, "center_y": -0.28}
            # theme_bg_color: "Custom"
            # md_bg_color: "brown"
            on_press : app.resettoemail()
            
            MDButtonText:
                text: "Resend OTP"

        MDLabel:
            # text : "You can resend the OTP in 60 seconds"
            text : ""
            # text : "Enter valid email"
            id : resendcounter
            pos_hint: {"x": .05, "center_y": .04}
            bold: True
            text_color : "white" #self.theme_cls.primaryColor

        MDLabel:
            text : "Attendance"
            pos_hint: {"center_x": .5, "center_y": .57}
            bold: True
            text_color : "red" #self.theme_cls.primaryColor
            theme_font_name: "Custom"
            font_name: "assets/fonts/DMSerifDisplay-Regular.ttf"
            text_color : 0,0,0,1
            theme_font_size: "Custom"
            font_size: "50dp"
            halign : "center"
        MDLabel:
            text : "by"
            pos_hint: {"center_x": .25, "center_y": .49}
            bold: True
            text_color : "red" #self.theme_cls.primaryColor
            theme_font_name: "Custom"
            font_name: "assets/fonts/GideonRoman-Regular.ttf"
            text_color : 0,0,0,1
            theme_font_size: "Custom"
            font_size: "30dp"
            halign : "center"
        MDLabel:
            text : "techris.in"
            pos_hint: {"center_x": .55, "center_y": .49}
            bold: True
            text_color : "red" #self.theme_cls.primaryColor
            theme_font_name: "Custom"
            font_name: "assets/fonts/GideonRoman-Regular.ttf"
            text_color : 0.8,0.8,0.8,1
            theme_font_size: "Custom"
            font_size: "30dp"
            halign : "center"
        

<LoggedinScreen>:
    name: "loggedin"
    # md_bg_color: self.theme_cls.backgroundColor
    md_bg_color: 0.0196,0.4275,0.3961,1
    MDFloatLayout:
        MDLabel:
            text : "Logged in"
            pos_hint: {"center_x": .5, "center_y": .57}
            bold: True
            text_color : "red" #self.theme_cls.primaryColor
            theme_font_name: "Custom"
            font_name: "assets/fonts/DMSerifDisplay-Regular.ttf"
            text_color : 0,0,0,1
            theme_font_size: "Custom"
            font_size: "50dp"
            halign : "center"
        
        # MDLabel:
        #     text : "Logout"
        #     pos_hint: {"center_x": .85, "center_y": .94}
        #     bold: True
        #     text_color : "red" #self.theme_cls.primaryColor
        #     theme_font_name: "Custom"
        #     font_name: "assets/fonts/GideonRoman-Regular.ttf"
        #     text_color : 0.8,0.8,0.8,1
        #     theme_font_size: "Custom"
        #     font_size: "20dp"
        #     halign : "center"
        #     on_press : app.logout()
        MDIconButton:
            icon: "logout"
            style: "standard"
            theme_icon_color: "Custom"
            icon_color : [1,1,1,1]
            on_press : app.logout()
            pos_hint: {"center_x": 0.9, "center_y": 0.94}




            
        
